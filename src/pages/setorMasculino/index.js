import Head from 'next/head'
import Image from 'next/image'
import styles from './styles.module.css'
import react, { useState, useEffect } from 'react'
import axios from 'axios'

export default function setorMasculino() {
    const [resposta, setResposta] = useState();

    const api = '';

    const [info, setInfo] = useState({});
    const [text, setText] = useState('');

    useEffect(() => {
        if (text) {
            setInfo({});

            fetch(
                `${api}anime?filter[text]=${text}&page[limit]=12`
            )
                .then((response) => response.json())
                .then((response) => {
                    setInfo(response);
                });
        }
    }, [text]);

    return (
        <div className="App">
            <h1>Animes</h1>
                value={text}
                onChange={(search) => setText(search)}
            />
            {text && !info.data && <span>Carregando...</span>}
            {info.data && (
                <ul className="animes-list">
                    {info.data.map((roupasMasculina) => (
                        <li key={anime.id}>
                            <img
                                src={anime.attributes.posterImage.small}
                                alt={anime.attributes.canonicalTitle}
                            />
                            {anime.attributes.canonicalTitle}
                        </li>
                    ))}
                </ul>
            )}
        </div>
    );

    useEffect(() => {
        axios.get('https://api-de-roupas-default-rtdb.firebaseio.com/roupas/masculina.json')
            .then(function (response) {
                console.log(response?.data);
                setResposta(response?.data);
            }
            )
    }, []);
    const click = () => {
        localStorage.setItem('selecionado', JSON.stringify(resposta))
        window.location.href = "/cadastro"
    }
    return (
        <>

            <Head>
                <title>Moda masculina</title>
                <meta name="description" content="Generated by create next app" />
                <link rel="icon" href="/favicon.ico" />
            </Head>
            <section className={styles.cabecalho}>
                <main className={styles.main}>
                    <h1>Moda Masculina</h1>
                    {/* <QueryString /> */}
                </main>
                <div className={styles.roupas}>
                    <h2>Camisetas</h2>
                </div>
                <section className={styles.cardsMasculina}>
                    {resposta && Object?.values(resposta?.camisetas).map((item) => {
                        return (
                            <div className={styles.card} onClick={click}>
                                <img src={item.img} />
                                <p>{item.name}</p>
                                <p>{item.price}</p>
                                <p>{item.size}</p>
                            </div>
                        )
                      
                        // import React, { useState } from 'react';
// import useDebounce from './useDebounce';

const SearchInput = ({ value, onChange }) => {
  const [displayValue, setDisplayValue] = useState(value);
  const debouncedChange = useDebounce(onChange, 500);

  function handleChange(event) {
    setDisplayValue(event.target.value);
    debouncedChange(event.target.value);
  }

  return (
    <input
      type="search"
      value={displayValue}
      onChange={handleChange}
    />
  );
};

// export default SearchInput;

                    }
                    )
                    }
                </section>
                <div className={styles.roupas}>
                    <h3>Cal√ßas</h3>
                </div>
                <section className={styles.cardsMasculina}>
                    {resposta && Object?.values(resposta?.calcas).map((item) => {
                        return (
                            <div className={styles.card} onClick={click}>
                                <img src={item.img} />
                                <p>{item.name}</p>
                                <p>{item.price}</p>
                                <p>{item.size}</p>
                            </div>
                        )
                    }
                    )
                    }
                </section>
                <div className={styles.roupas}>
                    <h4>Bermudas</h4>
                </div>
                <section className={styles.cardsMasculina}>
                    {resposta && Object?.values(resposta?.bermudas).map((item) => {
                        return (
                            <div className={styles.card} onClick={click}>
                                <img src={item.img} />
                                <p>{item.name}</p>
                                <p>{item.price}</p>
                                <p>{item.size}</p>
                            </div>
                        )
                    }
                    )}

                </section>

            </section>

        </>
    )
}